<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Group Detail - Track376</title>
  <link rel="stylesheet" href="group-detail.css?v=2">
</head>
<body>
  <!-- Header -->
  <header class="group-header">
    <div class="group-header-left">
      <button class="btn-back" id="back-btn" title="Back to Dashboard">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <div class="group-info">
        <h1 class="group-name" id="group-name">Loading...</h1>
        <div class="group-meta">
          <span class="member-count" id="member-count">0 members</span>
          <span class="group-type-badge" id="group-type-badge">Public</span>
        </div>
      </div>
    </div>
    <div class="group-header-right">
      <!-- Notification Bell will be injected here -->
      <div id="notification-bell-wrapper"></div>
      <button class="btn-header" id="invite-btn" title="Invite Members">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="8.5" cy="7" r="4"></circle>
          <line x1="20" y1="8" x2="20" y2="14"></line>
          <line x1="23" y1="11" x2="17" y2="11"></line>
        </svg>
        <span>Invite</span>
      </button>
      <button class="btn-header" id="settings-btn" title="Group Settings" style="display: none;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
        </svg>
        <span>Settings</span>
      </button>
      <button class="btn-header btn-danger" id="leave-btn" title="Leave Group">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        <span>Leave</span>
      </button>
    </div>
  </header>

  <!-- Mobile Tab Navigation -->
  <nav class="mobile-tabs" id="mobile-tabs">
    <button class="mobile-tab active" data-section="jobs">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
      </svg>
      <span>Jobs</span>
    </button>
    <button class="mobile-tab" data-section="chat">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
      <span>Chat</span>
    </button>
    <button class="mobile-tab" data-section="members">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
      </svg>
      <span>Members</span>
    </button>
  </nav>

  <!-- Main Content - Three Column Layout -->
  <main class="group-main">
    <!-- Left Column: Shared Jobs -->
    <section class="section-jobs active" id="section-jobs">
      <div class="section-header">
        <h2 class="section-title">Shared Jobs</h2>
        <button class="btn-primary btn-sm" id="share-job-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Share Job
        </button>
      </div>
      <div class="jobs-container" id="jobs-container">
        <!-- Shared job cards will be inserted here -->
        <div class="empty-state">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#d4d4d4" stroke-width="1.5">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          </svg>
          <p class="empty-state-title">No jobs shared yet</p>
          <p class="empty-state-text">Be the first to share a job opportunity with the group!</p>
        </div>
      </div>
    </section>

    <!-- Center Column: Discussion -->
    <section class="section-chat" id="section-chat">
      <div class="chat-container">
        <div class="messages-container" id="messages-container">
          <!-- Discussion messages will be inserted here -->
          <div class="empty-state">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <p class="empty-state-title">No discussion yet</p>
            <p class="empty-state-text">Start collaborating with your group</p>
          </div>
        </div>
        <div class="typing-indicator" id="typing-indicator" style="display: none;">
          <span class="typing-text"></span>
        </div>
        <div class="message-input-container">
          <!-- Job Picker Dropdown -->
          <div class="job-picker-dropdown" id="job-picker-dropdown" style="display: none;">
            <div class="job-picker-header">
              <span class="job-picker-title">Attach a job</span>
              <button class="job-picker-close" id="close-job-picker">Ã—</button>
            </div>
            <div class="job-picker-search">
              <input type="text" id="job-picker-search" placeholder="Search your jobs..." />
            </div>
            <div class="job-picker-list" id="job-picker-list">
              <!-- Jobs will be rendered here -->
            </div>
          </div>

          <button class="btn-attach-job" id="attach-job-btn" title="Attach a job">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
              <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
            </svg>
          </button>
          <textarea
            id="message-input"
            class="message-input"
            placeholder="Add a comment..."
            rows="1"
          ></textarea>
          <button class="btn-send" id="send-message-btn" title="Post">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </div>
    </section>

    <!-- Right Column: Members -->
    <section class="section-members" id="section-members">
      <div class="section-header">
        <h2 class="section-title">Members</h2>
        <span class="member-count-badge" id="member-count-badge">0</span>
      </div>
      <div class="members-container" id="members-container">
        <!-- Member cards will be inserted here -->
      </div>
    </section>
  </main>

  <!-- Job Details Modal -->
  <div id="job-details-modal" class="modal-overlay">
    <div class="modal-container modal-large">
      <div class="modal-header">
        <h2 class="modal-title" id="job-details-title">Job Details</h2>
        <button class="modal-close-btn" id="close-job-details-modal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div id="job-details-content">
          <!-- Job details will be rendered here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Share Job Modal -->
  <div id="share-job-modal" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">Share a Job</h2>
        <button class="modal-close-btn" id="close-share-modal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <!-- Search Bar -->
        <div class="share-search-container">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input
            type="text"
            id="share-job-search"
            class="share-search-input"
            placeholder="Search your jobs..."
          />
        </div>

        <!-- Jobs List -->
        <div id="share-jobs-list" class="share-jobs-list">
          <!-- Jobs will be rendered here -->
        </div>

        <!-- Empty State -->
        <div id="share-empty-state" class="share-empty-state" style="display: none;">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#d4d4d4" stroke-width="1.5">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          </svg>
          <p class="empty-state-title">No jobs found</p>
          <p class="empty-state-text">Add jobs to your tracker first to share them with the group.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <!-- Socket.io Client Library (Local) -->
  <script src="../shared/socket.io.min.js"></script>

  <script src="../shared/config.js"></script>
  <script src="../shared/auth-manager.js"></script>
  <script src="../shared/notification-manager.js"></script>
  <script src="../shared/global-notifications.js"></script>
  <script src="../shared/smart-notifications.js"></script>
  <script src="../shared/socket-client.js"></script>
  <script src="../shared/group-api.js"></script>
  <script src="../shared/shared-jobs-api.js"></script>
  <script src="../shared/linkedin-html-cleaner.js?v=2"></script>
  <script src="job-tracker.js"></script>
  <script src="group-detail.js?v=4"></script>
</body>
</html>

